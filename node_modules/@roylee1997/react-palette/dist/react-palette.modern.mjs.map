{"version":3,"file":"react-palette.modern.mjs","sources":["../src/getPalette.ts","../src/usePalette.tsx","../src/Palette.tsx"],"sourcesContent":["import Vibrant from \"node-vibrant\";\nimport camelCase from \"lodash.camelcase\";\nimport invoke from 'lodash.invoke';\n\nexport type PaletteColors = {\n  vibrant?: string;\n  muted?: string;\n  darkVibrant?: string;\n  darkMuted?: string;\n  lightVibrant?: string;\n  lightMuted?: string;\n  [name: string]: string | undefined;\n};\n\nexport async function getPalette(src: string) {\n  const palette = await Vibrant.from(src).getPalette();\n  const setPaletteColor = (acc, paletteName) => ({\n    ...acc,\n    [camelCase(paletteName)]: invoke(palette, [paletteName, 'getHex'])\n  });\n\n  return Object.keys(palette).reduce<PaletteColors>(setPaletteColor, {});\n}\n","import React from \"react\";\nimport { getPalette, PaletteColors } from \"./getPalette\";\n\nexport type PaletteState = {\n  loading: boolean;\n  error?: Error;\n  data: PaletteColors;\n};\n\nconst initialState: PaletteState = {\n  loading: true,\n  data: {},\n  error: undefined,\n};\n\nfunction reducer(state: PaletteState, action): PaletteState {\n  switch (action.type) {\n    case \"getPalette\":\n      return initialState;\n    case \"resolvePalette\":\n      return { ...state, data: action.payload, loading: false };\n    case \"rejectPalette\":\n      return { ...state, error: action.payload, loading: false };\n  }\n}\n\nexport function usePalette(src: string) {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  React.useEffect(() => {\n    dispatch({ type: \"getPalette\" });\n\n    getPalette(src)\n      .then((palette) => {\n        dispatch({ type: \"resolvePalette\", payload: palette });\n      })\n      .catch((ex) => {\n        dispatch({ type: \"rejectPalette\", payload: ex });\n      });\n  }, [src]);\n\n  return state;\n}\n","import React, { cloneElement, ReactNode } from \"react\";\nimport { PaletteState, usePalette } from \"./usePalette\";\n\nexport type PaletteProps = {\n  src: string;\n  children: JSX.Element;\n};\n\nexport const Palette: React.FC<PaletteProps> = ({\n  src,\n  children\n}: PaletteProps) => {\n  const palette = usePalette(src);\n\n  return cloneElement(children, {\n    palette\n  })\n};\n"],"names":["getPalette","src","palette","from","Object","keys","reduce","acc","paletteName","_extends","camelCase","invoke","loading","data","error","undefined","reducer","state","action","type","initialState","payload","dispatch","React","useReducer","useEffect","then","catch","ex","Palette","children","usePalette","cloneElement"],"mappings":"oXAcgCA,EAACC,GAC/B,MAAMC,UAAwBC,KAAKF,GAAKD,aAMxC,OAAOI,OAAOC,KAAKH,GAASI,OALJ,CAACC,EAAKC,IAAWC,EAAA,CAAA,EACpCF,EAAG,CACN,CAACG,EAAUF,IAAeG,EAAOT,EAAS,CAACM,EAAa,aAGS,GACrE,CCbA,QAAmC,CACjCI,SAAS,EACTC,KAAM,CAAE,EACRC,WAAOC,GAGT,SAAgBC,EAACC,EAAqBC,GACpC,OAAQA,EAAOC,MACb,IAAK,aACH,OAAmBC,EACrB,IAAK,iBACH,YAAYH,EAAK,CAAEJ,KAAMK,EAAOG,QAAST,SAAS,IACpD,IAAK,gBACH,YAAYK,EAAK,CAAEH,MAAOI,EAAOG,QAAST,SAAS,IAEzD,CAEM,WAAqBX,GACzB,MAAOgB,EAAOK,GAAYC,EAAMC,WAAWR,EAASI,GAcpD,OAZAG,EAAME,UAAU,KACdH,EAAS,CAAEH,KAAM,eAEjBnB,EAAWC,GACRyB,KAAMxB,IACLoB,EAAS,CAAEH,KAAM,iBAAkBE,QAASnB,GAC9C,GACCyB,MAAOC,IACNN,EAAS,CAAEH,KAAM,gBAAiBE,QAASO,GAC7C,EACJ,EAAG,CAAC3B,IAGNgB,CAAA,CClCaY,MAAOA,EAA2B,EAC7C5B,MACA6B,eAEA,MAAa5B,EAAG6B,EAAW9B,GAE3B,OAAO+B,EAAaF,EAAU,CAC5B5B,WACD"}